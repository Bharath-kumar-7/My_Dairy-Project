<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Privacy Required</title>
  <link rel="stylesheet" href="./DedicatedPage.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
</head>

<body style="height: 100vh;" class="d-flex justify-content-center align-items-center flex-column">

  <a href="FeedPage.html" class="btn btn-secondary mb-3">â¬… Back to Feed</a>

  <div class="Post card shadow-lg p-4" style="max-width: 800px;">
    <h1 id="postTitle" class="mb-3"></h1>
    <p id="postDescription" class="lead"></p>
    <p id="postAuthor" class="text-muted mt-4"></p>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const postID = localStorage.getItem("currentPostID"); // âœ… Get post ID from localStorage

      if (!postID) {
        document.querySelector(".Post").innerHTML = "<h4 class='text-danger'>No post selected!</h4>";
        return;
      }

      try {
        // ðŸ‘‡ Fetch post details from backend
        const response = await fetch(`http://localhost:3000/getPostById?postID=${postID}`);
        if (!response.ok) throw new Error("Failed to load post");
        const post = await response.json();

        // ðŸ‘‡ Populate the page with post data
        document.getElementById("postTitle").textContent = post.postTitle;
        document.getElementById("postDescription").textContent = post.postDescription;
        document.getElementById("postAuthor").textContent = `Posted by: ${post.EmailID}`;
      } catch (err) {
        console.error(err);
        document.querySelector(".Post").innerHTML = "<h4 class='text-danger'>Error loading post.</h4>";
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"
    integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D"
    crossorigin="anonymous"></script>
</body>

</html>
